#### 脱敏组件技术方案

##### 1 组件用途及价值

脱敏组件主要用于接口出口的敏感数据模糊化处理，规划将支持REST接口和dubbo接口的出参数据脱敏，可配置多个字段进行脱敏，可配置多个角色不脱敏，可指定脱敏规则（手机号、身份证、自定义等），接口脱敏将支持热配置，配置修改即时生效。

脱敏组件可以提高我们数据的安全性，通用的脱敏组件将减少开发在这一块的开发工作量及bug率。

##### 2 脱敏组件流程图

![image-20200306141453526](/Users/muye/Library/Application Support/typora-user-images/image-20200306141453526.png)

##### 3脱敏配置文件说明

配置文件采用json数据格式，范例如下：

```json
{
  "config": [
    {
      "type": "rest", 				//rest or dubbo
      "route": "/api/pc/abc", //rest接口为请求路径 dubbo接口为方法类名#方法名
      "fuzzify": [
        {
          "feild": "mobile",  //需要脱敏的字段
          "rule": "phone",    //脱敏规则 会内建常用规则或使用表达式
          "nofuzzify": ["100", "200"], //查看明文的角色号
        },
        {
          "feild": "phone",
          "rule": "[3]{4}{*}", //规则表达式 [3]表示3位明文，{4}表示4位密文，{*}表示至末位全是密文
        }
      ],
    }
  ]
}
```